workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmcwSGpob2NqdlEycHlRcDlSVHhfZGdMTmxlTE1SR2QzdkMteUtQd1l6ZmpOUldKNkxMT01vR1FZMi1rdlFfdVl1dlpvb1JqX0R3dEpvUms2YnJiQnBqRHJhcl93eTc0ZUlTTHJEaVRmV0tQNV8yWnZHZllxc3JrUWo1UVloRFpHOHFVTjNRWmRPaGtJVUFZbW5oQk42bGtqMFhsYndBYnBZc3UxZk1sNi1IMElaX2k1a3RxbXQzSElNNmo2Tjh6TXdBSjBYSkFNZVNHUy1qemtELUt3WktfRWpNNFVzZk51cjBmMjd3bzhOby1nZWtrOG9DQk1UTE5pOE5VZmJzbDVvUENhSjBRbkdIdEo4T0FsM29TQTJvakdMS2JmaEgwU2pKRWpQaWRESmp0WFVjU0RfeW10MVFLZVZCTzd2YmVLX3gxSHZRcGFKcGRSQmxuRTFCTVE2V3BrZTE5R05MS2pfdzB0RW1oQUZtaEliMXJRNXlmNmNwUjRvTEw3ZXFtblQwM0FYcUlCRzlkd19ya2xrUGJwWElJY3BsdWNnR0xFWjZ2R1VVcHR2VUpNVzJWRkp3a25CM3RSN215RW1aaEs4M1pLdE1YMVhwbHJFUFlVTFBkXzlzeDJlTjk5WDFCd1lrRWp3XzlHRW9QRzdqSUZRd2cwMlBfMS1PMU5ic19jcDJIU0YyUFhIMDVTX25qemxudUxZcFdYMUx2UlBEVmpMTlJvZGYzT01uYmpaZXUtRUNFMU9sNG1Ob0xFLUYzalVFQk5RczZtQVdwU2tsR2JyeWc3QkpqWGh0QVRZamptQUtTck1qcS1obkczSEk4U2djNFVfRWYwVG9MTkRvQUVvdU1mYXczWDF0ZWVTZnQ3UjEtRTBMUU1fY0hTSU5yVi1veWpIelM2THJCS2JNQU9ncHh2NDhkblBaLWpLOWNrM1dIby1XN0o1ZmM3QjVMREdPVmxleVpjVjVPU0hBR2pvalVZRnVXYlFVd0dxS0xrWVQwbDdRWkJIVEFrRW0xeGZKaVJsRC1GOXJwQXo3amZ6bGlkSmhENjJ4QjgtVGE5VEItZUVzdjRoVkxjOE1Qc2NOUWF2VkRRSk42Vk1KdHV0Y2JJY3ZXN0loTDRaV1AxYm55ODdsSUhXX3lmeGJyLWdNYjl6eUJlUFZGOUFBaVVNYTRoc3l6R1RnbldHTHJJR1Z0ekVVVElZUXZ6SnJjdXY0OTEzbEY3TjNtN0MtdF9vaWZrYXprX2tldnZKMEMzV3JmaThWNzhTLUJLYmlFY2g1SGQ3eWlxZnZ5SnA4Q0xIeEVLeGJHSHhVWVRWOTFsTVhRSlNzYk01ZEZxZ29SQ00tSXZHU21jdDVyTzdselJyNGc5TXgwYXhlQ3pFSzVVYjAtWWdRV1FOaFNpWUlBZ2JtVXFNRktHYTJSeDNPSTJFa2dHcE5Lc2Q2WW9Xb2dORHZhYVlNQzZ1YVZJbVhPdE94bS1VMDMyWURGNjlkZi1jUHJqQVIzYkxlTDlHai1FbDNCZjBPMlIzVE1CVkJLaDUweUJSZDZQaTM5MDduckZVaUp1XzQ5d3JrUEhLYWg3VENsdTNoa1VXWGJYS2Q3LWZHaFhmY3A3VHg5SE03UjY2eGVtOENwZW9LOFpZSEktSnM0NkJ5Q3FPSWo4UGtwalMyTnpNRGo3a0NjSDlyU2tMVTNVUTlXRWx4SU9FZEhzVkltTEM3bmg0Tm5JNFM1bDJsdUw5a1NqSm1sZC14cHdMa2k5Wl9NbU9FVWVtajRxcjVXa1NiQ0U1ZjYxdW9yZENlMGNadmNWR3hZRm5pMXJwLVlkSVBsdmhncm9rRWJtT09qNURpdkozX2l6RjVPcXJTb0R6aGVMY2V6NFRkaHNKeWVpelZZdzlDcS1WRURlN19TWXZTRmFQc2MwekZjUjhSOXdZNjN6YjFnaklCU09uZXJaVDlnRmpIby1oWldlQUxheEctR2xiWGVOa0x1cUdDVVA4X29kWnR1QzZoTlQ1TGFxNUtTWVViaWdwRlBfamp3NmJUUjd0MUxqQVZ3a0lYZXRjZ2RBeWVKcHQ0YUJJa3pWREJSZjVocUFfd1JHOWhXck5DM0tULWR3R2k0RTdlby01ZlJHeUxkWTdZUGk0R2Rrd1FLclRLVUN5dTZxdDhnRWozQkw5VHBUSUVMd0V3Q3d2RGdpLUdlRGs3TnJDenJ1NjlkUWhrWjRYRjhGX01XOExsN3owbWRsdVJpSnBuNjF4LUs0ZTR2dnJfY1N0SVY3VkxreTd5MGhRNGdONHRKX3BoWlRrNVVfNDhxN0VfZzVCZE9rRkJKRmtjY3l4ZFpBU2VicnFzUUtHYmNOSkpxV0QxUHJVTGhrMXZHRUh4cUdrMkM3VW5PTDVsMzZ6X0pGVjE4SktCYXlGT0VEZlhySHBkOFRPLW9wRWczRXA0cUFmLUJnYWtiU3FMWGRrYVB1UU83UlY0bFlCb1E1VUhTNXlTOExYRGRJWDBzTDltRThIcDhrZ21lOXZWMFAySjJQa3BzZ2xfTnlMM3N5TEtaOUpLYi1Qb3dFTDh2ZjhNTFp5cUhRVEhsWHVITGVlcmthV0ZHZ19vODdKdzFBY2VhR1VHVHZVUHkyellrNURhZW9LSURnQjBfbTVHQ0VIWk00TzF6bHhTd01zMFVzTXFZUmpuOXdXa1Vhd0kycXFZRzZiQnRQa05XMl9MSXQ0Y3NSRGtLVC1XaWZIX0ZNN2lnNDhzZW5lRU1Zc2ZnUGNlM1NJc19uS196U2I5Nktpd0Z2clA1LUd3aUYyM092enk4X3BiOHU3R2lNQlhqM0pFcGF4ZTJ4Qk41eXl3VWRNTFVwZThmMVJzdUxkZUI3QlpOSlo1UWVOLXZ1OFpwM1RDbmRCX1REQ0EzcFp2dklTa0prNDVPcGsxeTU5cEhkVHpaaGx2eHlRd2ZZUDZOeHRJb3NNTmJodXV5ajBBQVNMZ3Iya1RiaGVxSFFtc1lXQVlSZU1YME9SdzA1bG9wX2ZCUUZ3V0s4Ylp0NUk5TjE2TVI3Y1BmRzhpSEswT2FLSVBDMjVPM09PeWd3STRfQnN6SnhBUVZLQ014OVdUV3gyN0Y3UTdScUlGQkxzd3hPZlRDT3NZaGdQTDZUV0RrSHVibWtqZ0xTeEtEd0NfN2hWRUxfOHNOWXR6N1ZHdEg5ajV4WmxBVms5UW5WaEdnSXBsVEpTbER0Z3czZzBjR2E3cHhxR1J0TkpNOVJITms0VmxEdTYyNVk4ZXk0ZC05dm1YcURjTzFCYjNWR0VuQ01nOGNpTjdIeTVNY0N0QVdoSXFrSF9zN1l6OXE3QWJDM2xuR05nS2lqUEUyQy15aFlUeUVnWWJsQVNOU2w3MkZiVVl2dmRua2xZcld3YnJzVG13am1xM1RHYXV6Mkt3aG1NVVBCZlp0cnJhS0ptNWt2dzRPMHQ1YlpZTFZrYy00elpuRUI2UEVhRURHM0htU25QY2JjSWtwaEFLcU9ZSV9IbVNSa0Q0clpYS29PNmVvZWp0N1daMm5LUm1kcGVDU3U2SHhvaEtOeUFhaGlveWtRNmx4akZjLVdyT0kwUTdnLU5Nbm1CV1drcGZkZjNHMXFjbWJzU18xM1cwZ1FnMUV5aERlNnliTTRyNWwwMzFHaEJPTndUNndjQ2R0M0E1WmRsOWpVMy1jRmVSaHFtQXJ2N0g0dW9xQm9icVlYRnplenI4cjZVcWxlNFBRMGZCSjZncHJqUk5kY0hYNU85alNqU0JHemcyUWRpWktpQTBrYjl6TW4zLVR3NjEwMWFoMVFsUU14bWZXek8tNHRpaXVXclM5TlRDbGZ2WmM5ekdaYVVRYVFpVTREeXh3dGltLXpPOTBYWkJGUFZPQWROQ2hDUDlQUG11em1kcS12RFpNSnFxVUVQU0xyRW5LTTJORkxnYVpXVGJlNW1vSVNCZVloZjFmUXE0REJrWm1iRE1PcEJDMkcxOXM2Mm1DTkhZWjd5TnlnaHE0UGpiRUwzY0JBQy1YQTRKU2dZdlRPTDZBQjk5VmU2LTc3OW1FaWcwMmZwb29TMlJQVzV3QTFKdEJMVExvYU96blBOY01Yejd5YjRTaEdPRXFLT3BQLWdkODh3MldwOEp4REhZRTlDOFdfRk5zNF9LU000eU5qWWRVQnYwN05PMEpyeHRwMC1uWE9DRGt5TmRQSXJNV2tkSkx1bmRaeHlIWFItekx6Q19qaGtOM1B4ODhINThfVV9mZDdfQm01Tmc5QzJJa0plR3JvYVpZalZFd21zbjI1Xy1NZmhYN2tqZG1EMHVpTWtFTE9BR3JmM1N4ejFkLTJDTktlMXdfS2xjVURsVlY4YnVRMFdvZEplemJrWVF0aG9FdkNZOXlPOExfSjdZc0o2RlIxZ3Q1RGI1UDBkSDFCbENGWDJFRlVNUnh0TWoxUmVCbVh5WXY0SnE2a3J3YjBLc1k0V1o1bFVGOHhSTGkwcDNrY1ljbVY4SzRxUDBhNkFMandXTG15ZWhLRUhjMDJvTTJzUEhqNXVVT1FsNDg0dDdoY3g1bGR1Ul9Qd2RNS3U4NDRMYVlIQ0tkU1BydWJjZGd6TkNLN3VQYzNlOFVkcUdJb0hacmNTMGFnbmoxOUNXNjVCSFpqcHh3NGtSdTJDWVVYcnlFdnN0YnhJVWhvN0JaZEdxbjFFaXNEa3F3X1VwZktHWGs4bHluXy1kN3pDRDVnQXUyQmk5a3RsS3Bub2JKTmZhMEdzaEVEYVE3dFJwUDZ5ZC1ibVdaLXJscEpPTjNON1IwZFJ6X2M3NU15OWczNjBnc3NNeThpcFV5cWJJMkhVWXF6SDVTZ2wxVi1fTnN3amxGT1QzUGY0WWg3QndNeU8xWEdVN1ZYRGtJLWw3T3VUcUw4WHowckFNUlpzeVJUbHptaG9oLXR5QkI0Q2xmUDl4MUNQRFhGWXhpbGpYY0kycmJOcXJiRUpEVGtXRkVpd19RY0Zac1A1dUMxWmZDcTNFZ0VxS0I3elFHZ3ptYVBySm1Wem9tMDIwNENKUEhEVHptSVFHblVMMnRYcVZ3VE40dVdpUjNMcV9MTzhOZnBLMWdPUUwzc1BfX0UzWW90d3R1M0I1UUdWYldOU1REQlYxN29RR29heGhncWVPenJ1TnlvcTR6azZYZkptMjIwblpIS2Y1SUtfUEFrZWxOdmFfVFNKTlZBeHFNWFFWVE00cGpocDVnSExzbTJNMF83Y01XOUE0Y0txN3lLaGt1NlIwQ3hNZDBYSjNHdW9CcXM3SlBSb1ZTQ3dwUlloQTFaM3h3a3FuUlJxX18ybkxzaVM0c0xPbkVLNEtFSUtCdjZoM2hZTzNEeWhieFRuUzFqczRvTXZmM20wNGUzN3prY0Utc0pPX1k1MEtBUjcxSG1kZDlqa0NyTkNybmhBWHdTM2kwU05LZWVqYkFiMXJuVT0=)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmcwSGgzUTlYWUsteGVibE1Yb3JoZEhzSlBBbmttNHRzRm42NzZPMFJ2RVhoSWpMOW5ncFhfb1ppMUhyTUVxcFhyQjlKN0lhYXBtOGxsQ1lnU09seTJrUjFhbkE9PQ==)
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmcwSGlncVNuWlJJTDlUal9pc2FNeXF1S3pzaGtHLXBvX3E5WWh6cVB3c3piTmtvTWFTNEhNaDNILTRWWnZwXzI1VmJtajF5MGlkbGhTd0V1RDVLMmhhLW9LNlE9PQ==)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmcwSGgzUTlYWUsteGVibE1Yb3JoZEhzSlBBbmttNHRzRm42NzZPMFJ2RVhoSWpMOW5ncFhfb1ppMUhyTUVxcFhyQjlKN0lhYXBtOGxsQ1lnU09seTJrUjFhbkE9PQ==)     
      flutter: stable
      xcode: latest
      cocoapods: default
    scripts:         
      - |
          # set up key.properties
          echo $FCI_KEYSTORE | base64 --decode > $FCI_KEYSTORE_PATH
          cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
          storePassword=$FCI_KEYSTORE_PASSWORD
          keyPassword=$FCI_KEY_PASSWORD
          keyAlias=$FCI_KEY_ALIAS
          storeFile=/tmp/keystore.keystore
          EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - flutter packages pub get
      - flutter build apk --release
    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - nihal@nevercode.io
