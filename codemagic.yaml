workflows:
  default-workflow:
    name: Default Workflow
    instance_type: mac_pro
    max_build_duration: 60
    environment:
      vars:
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmc1LVpLa2Uwc1QtTmNBX0cxRW1jMmw2eDhVd0pfeTk0d0NFQXZVcHlSUzNJX3JNb1I2bW1vTjBhSEg2QW9lNjEwdmIyLWU4QkNmd0t1QTZ6VXhmWUhfbUpPT0RoNUlpem9CVEhQMWVTYktGZm9GNE9lTnZTYW84d0hHbkFkYnFmTDVTSjQzd0RKTlh0TVNDd0lqbnhKd3FJcWNaaVJzM0E4cnVHdXFodl9vQ0JZOEFaVjRKTnlEbS1UZklXM0ZOQ0o5SWNtbTBLRU5YLVc5NnJzSmV0MTdXaGhTZGRxZUFqVWRTaVBzREYtdlV3Yi1fNVRmOWRLb2dhUEh0LUVaNTNMTERTODZrT29uWmZ3UmdjRGVMUnZrLUFCUGluOTJla1pSUGhsZWtqVEU1aXFWcVVSdzF5ZUN4QS10WXZHTWxoUnhKdjIxSXpxOGlSUHpOWHRzZHVmcnRHVEJaME8ySG5aQnp5anBVWGo3SFVfaFNwNzRsNFJZSE1jZ3RQeUFVd0t3M1RfeVlIMFRKOFhNc0FsR1VQYl9Bd1BLOG9RWk9fNHo4d3dCbjgyYUxOTm9ReWxKYXFvTTY5QXdGT0lsR0ZQZHBTczl2X3pKS1hPZUtQUkM0RTJSZUdxNUdmVDc2cGhESnNZRTZseXdpNEpVeHdKbDRocHF4cUxOWHpleEZ3TDB4b1hra2tueTlrQzdRVU9IRlRIdVNtaDRkN0hDeFhxbm5KTDVDZ1FpWGFhdnA2T3lITDhJa1Z5NExSYTZzd0ZJMV9FTFJpUmNwM1h1eWtDSG9NbUVaS1o2UUZ3b2VrWG94cnBaWUE0d2J6UVZpbDBiWS12VWNzX2tMX0NEekVzNEJKMUFZN0pYakx2VHdpSlFTekluMWxfTHN5d2xiR0s1S2NWUWlfeEE4RzlESndfN2REVEVobkhLQVMzbDU0VGdqV1JSRDh1cWk3ODNQVDhWWlF3alNVWFk1NkxOYzJTdi0wdnBSc1BLcDdMd2JLTUlGUGpiTktxWlNTT240UGlVMF9lR1FCeTNtRllkeVp1dzNGemZVbUV6RThNOG9CbTFKTnZJcnVGWlc3SFVDSEp5NExFVEhhUkE0ZVBmUFlya1BzcFhaLUZaSXNNS2sxQkRfRGRnMHhzcm9FYnRUNXFaMUN3aWFkaENjUnF4Q2dQR1RPTHdzcjBlM3hyUW1heUw5VElEZ1R6bk9XSU9va2pxeW9yZWthUHRRMU9OVEhTclhEcGI4ZFhhU3NfenRSbmt6dWo3MGNkemd0d3k3NkJ5ZmFYUFRpNGtyZDQ4VUtmSjJMNGo1YlJmaXZJZW91Yk5fa2NLRUFMS0tfQWFORS00RlJCQmdzd0J5THFma2NqbFZRbGJuV1RUSnktRnpvcVVPU2lTemhhV2ZUTDZ5MDlMVG9iUzl4MTh0eHo0Y3BaTFd4ZnpIOGxKYkJkclB5cmNobXVtSlVLWlhfbjZDa293YTZTc0hJVFFjM2hHWG5wam53LURiaWluZHZLVnRXaG53TlJ2c09XQktXYno2ZHBFZDNPSDRTX1ZzZ19PUW50d3pCcHg1cGtkZGpZbzNXMndGV0k5cG9XZ2txX3lZRVg1V1FDUnNYX2Q0VVpmVG1oOWh2N2FJcFRaNWh3bVNmT0MzUlNTaUpkS0FKdGFib2hieVY4THRjSS1rQ19HRFBzSm1NbFhpMlg4eXJQdnZZT0N5c0xDUDB4d1psenRNZzlYX2xmRC02UHNKbXI4TXJUNnppVDd5a1hwb21QRTBZUmhYR3cyTHNvNkZyMldQemRNOHI3cEtQREdPWkV6eFVXa0xsYXVaXzlQWElUZTRzZXlNUUFNLWFMaGExWTVqNnExN2ZRWEM0YUozNFZFZWxEck5QUWhtNFYxVXByWjcxWFhaUmtXV2tHM0NvRV9qSlY3aEwwSHZUelA2bHZHWTZvTURVTGVuZjk4SUtSaUlmT0swcjZyOGJ4WWNUYVJZeFRQdVg4UmU4QVgxOWo3alZMU3FzRUtxbWFNM0VPdmxYOTFXTmQ4ejc4SU1VSmdjRDlLclBMeno4Tm9vNXBEa0UwWTFvamJVVWVRNllQMk5RRmhKNktfZUFQRXZ1RWRIemZSd084VXZXbFQwTDVJUEduc1VNSjJ1aVQyT20wUlo1VThlSmVPYk0wR3J6d1hmbll4eDBRajF5VlN3Y0ZfeUZsSk9mVHN6UjA4cm1OcVgxeU4tNl92NzBwNEdQRVFOZUJDeTcwWEhqR3EtR3d0ajFqY0ZtdmRiQUxtR1dSUVliTVVfVm9GME5WQ2Y3X1lRVUd3bnUzcFU5czNfV1ktcDdFeGd0dTlYdEJFWkRmSEhyWXFFN20wWkRpSlBzSGN3LWxmc1Q2SmlVaTJwSmNWRmxXZ1JteGpiWm1lQXk0cGxNaDVKMGZ2V05uM3hhSllEeDlLa2MybHMwVGFXaWNDVWtFUVozendCOGs1aUVMY2k4MjFGNnB0TXg1RWVvYnJ2eEZweXBkekgwRnU2ZU5nMHlnUXR6Z3c1ay1IcTBXb2VxMjVCcEZSZWVzRkdPeHpjV3pTNnN3OTBzb1k0bUVyUjZpdTJpRFdDNjJ3dW45eU8tT0RTMThRaXRaNlBXOTFMM0M4Y3dkZXNkRXRtUER2MVVHQzRSUVNKSzlJS0RONHpVVWhCR1FlWTNPU3pFeWV5RG5nMUhxQ2xZT0I5NzhrcWdUYWg2Y2RlVUFobGNfYXpqcGRLZTVRVTk4U1dNcDN4N1VBaWhQRF9CcnRJcEJ0WUFyS3RIVmg4cDhVOThtQmdHU0oxSGFWSkExamFHRjB6aWlhQUxVTTFFLXZ5UHdJbkZseDZSRXlKeGhzY1VMVUxLRXI1LUU4aTl1RXlFX1Rib2VKVHZxbzdVMDJxMHBWM0JsUWwtemhrdU9QMVdvZzJSY2xRUlExZEJScTE1R1ZuRGttOVl6ODIxUzMwM3U4V0FDTGNBdXlMM3UwTjBOZDlpejdVWmdCZjNHVHBnbjB5NzZqUXFmaXN6cE9KTUJVVnM5ZElDNzh5ampKaDh0RC04Y3NjcUJXR0VXSlZCYW5uUUhWWEhwQ0dOTWczS0JQcWJmS3h2dVoyRlk1V2tFSk92andzV01UUWJCbGgwODJueDQzUzRIWU9zb1Y1VnRNaXU3TFpJNTBldExQLWJKc21ueXZfM3JvVEExVDJQX1Zia3dPTmRibzZXUVdySVpyMXdrMkkyUmlGMGE0RGsxT2ZZZlVNbm1Td0JJaUllYnotRjRHbkctRzJFMHJyVzJ3a01pMXV4bUZBWXEtSUtkNWVRRUkzN21HbkFJUUNKeVdiVFVZYWhITmxMdndFT19oSlVOMUM3VWVWMi1oSTRlSFhWOXpwbWt2TWVnNkNxZmVMS1FFQWc3NFNfZEFnOFNLWFFtRUFFcHo3R1VSWWlVVG9wa092NmpYMFRJUzBRSWs3QW5LY19vcGdmRUdIM2drNlVJQUVaWlQzNFltYjUteXltWjA0TEIwYWN0dmtrSzVFdV8yaGNBSUEzRTJKZ2h4bDhJSFNKd1A1ZnF2RnQzNlB4VkxGTWFMQ0tuRURYemlCU1Bld1dCYWJ4amZ1NHF0dVJ5ZHRlZkp5enM3UlFGYVlnMVZBeEVNaWw0MzJ5YWlDNzg5aWg1Nmtqby1SeDhacU16ZWt0dE1Ta21JX3RtMXRMaXI4R3N5cE1VUk1IUmdzMEtxUENJSUtUWW92S2dKcFFlNWpTcWZEM2tVQmg4TWNhR2tPOHhKMUJPTjRJRENaRm9xLVh3YldUOEoyazRvQUpGZ254RmFUcnVYbGVsNHlqdy1oMGNXb1l0cmI1X2RLOGNRUTdXSXMwLVJwYUFMa2wwZUVMQWVPdzYxbm5kTzFldDNFU3lvcjZDWnpXYkFoLTdfUHdLSjA1REI2MXBHOE40Vjc1UUxKR0RzV1JzT2pKWUhGYVNzZHFnSlpFQThGUjlQYUNzbjYzcEtIbTdRVWl3aDVsNjdVa3BpRjJuVDBqOWlTRk5ZY2hVOXJHUFhxbG9ja3BRMGZOZXpZczVHaDlqV3ctWHpDMHBJWG5xZGt6R0ZhUDJJb0ZiUUxNMk8yQkJ3b0pCbnI4SjRqNTVXZ241SDZYOVltWHNkVTlKV1A5SVdKWmwyR2xSRUJpMUFpOGI5QV85OVFqWG05LWNyWXgxbGhyNld3TlVsMWozbjZpcXNNV09XdElvVTlEQTY4OUV6X05CRmxGYUpvdDRzeElWb2YzRzN5UXpQbl8zaW5jYkpHQVV2bm16djRJOGVZSHJ2NUNhLUo4WXlnb2MyNnlaSm5mWXlGSjNLVVNuU1VuVEcyX01KLXFwZGdGU2ZBRGVxYTVFblV1MXhubFRpYWJDdHZKRm5iZTRiT2hLM1RqX1lJMG9mX2JWMGQ5WHc4LWV1Z1JmWElpRU5zZ01yQWc0Y0FwUHhuRHBvWGtZNGE2TnhfMTZrLUwwOERRNWtzcHRNYjlpVFZLVVNYUGZZZzJQeXNZNFZrajZRREpZS1FFSUJhblNxTlFpcUUxNDJkeTFHOWdaMDU0SlplclExNklQWUJqMGV0M3NGXzFnNGUtUHhkeEJGSF9INjF5SFQxbkl4ZlZoZllxeEFranlRb1JPUnB1NUxXQk5ydEVWLXpGWmE4WVBrOVJyV1lTYmNPNjFjbWlkOE85OGlkTm9Sa2RlNEo5YVktcW5XNk1DWlBDT2M3OHVXUFJBWmdZaVlpV0V3REpYQVJyN1NDNlNxQjRiaUZMUV9QZTgtS0o4MVI5Y2JCcUhIQk81MjJzWG9ROFVmeEZUT2xWWlhDRTR3aGdaeUstZGhqYS12d0FUNnI3MU9PejM1WVh2cGt3UTVDRW5xSi1TcXB0aFFtV2tFVHE5UUZkX2pselRZUXl5bFdyTVhvVWZkZ04zSlNTYk9sUG1JM2Q2TlQ2cV9qUDVMcDJmbHg1NmlGWEFUbUNmWmVWOUlJbVpEMmN3TzNDR082WU5VbFZjRGtiSFZCNC14VmE3bWduczdFUWpUSmZnX3M3TWFPcXdZcEhHN3VYYTF5WEh5aENYSDc1RGJ1YmppNEp1WWlkU2FYd2czcUh2dG00ckxHT3Blb1VCTW1pT3dJS21ZUV9kX2xObzVIbVZleG1BZFE5dEVXYXJUYkNOVGhJSFdyQ205bEFMcW81X2ZXRmx6WEVMR3RWQl83QmVYLXR1Y190SEY4cEl3SGdYSlVGd2hVMnZPN09Rb19zQTl0R3o5UFVjd0lvUTZiMXJLRWg2UFR3NmhaNTJCZml6OXRsdjhKOU5URGx3bVpYTTRtVmNhU0Z1S1pldzAyNzBHdVZqX2VWVzJOenlhUzNPSGYwWjl2RGdVc3Bhc1FPVHNOZVl4RklCZkN2eVVmR3JwOG1oNWprVDFOOHEyVFBmcEZHOTJhYk5oNFgxbUVYa0JOZz0=)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmc1MjZNNG5PMkQxdUFZbjB0bmVzT2lzaFZ0aGhyOWxDVEZJeWloT3VNN21LaHVnenFQeDVsMmdTcXJSZFpJWUZwWVVDci1acXQwcUJEbkN0M1RpX1U2U05FdkE9PQ==)
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmc1MjZsbFJVemw2QUpZRl9UNWx1MGR2TjlSQ2hxMjR1ZWdmVlBTME1fS2Q0cGVsOFBkUnE4R3JyR2E2dlZQU29SYmJTbTNRWEZDYUM2VXZPVjBmV0hlTUxhR0E9PQ==)
#         GOOGLE_PLAY_TRACK: "internal"
#         GCLOUD_SERVICE_ACCOUNT_CREDENTIALS: Encrypted(ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAicGMtYXBpLTY2OTc2NDE2OTI0NDMxNTUwNTItNjUwIiwKICAicHJpdmF0ZV9rZXlfaWQiOiAiOTRkOTQ1NWJiNTg4OWM1NGE3ZjRmNmVjN2EwYWFiMDYzYzYxZGFlMCIsCiAgInByaXZhdGVfa2V5IjogIi0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLVxuTUlJRXZBSUJBREFOQmdrcWhraUc5dzBCQVFFRkFBU0NCS1l3Z2dTaUFnRUFBb0lCQVFDajJTRzd3clBmdUx3clxubW9ScTFURURoS01vd1N4UlFGRGExTFp0b3hVZGduWURZbkRYb1Y5TGhGSFd6UFVmUGZrc0tTNU5uN2YxanZDNVxua2FHMUtBbnl1Tm1qUzQwdjBaai9JVFF5WVVYY1NGeHFSblkyNVJVdGhFa3ZsaU1JUDhwY052ZXJHekhXNnloa1xudjJLa3hKblo5NFdOcFhnbDBWNkF4b0Q1N04ydmgrYWRKdVNOVUkwMGNaTW1yM3EzcEoybjYrbnN5VmRnWDFhTVxuSlJsdG5WTkFaSlZnOTVkdHZyVS91M2ZGR1N0RFhRWlVDdW5YSVJKL2xhSEVtaFM3MDZtaHB6enE1ZUdFMG5mWVxuUGFvL3NYRmpzNGxsQitPc2pMV3BGM1VuVDdrRVc4UzZQSUVGdVpyRG5WRk56aGdoYWh5MnVMbURXejlpejBxN1xubXpGa3BxZmxBZ01CQUFFQ2dnRUFCd0hnRzUvRWwwS3NmWVdTdUlwSFJJVEFLNXZlQnRnNWZRVVFOa1BTd1RFcVxucXo0TnRiM000d3NVMVpzWFlxVFdZQlAweXlvVHNTMzhwVVc4Qk9ZM29yTlN6My9lMlJiZGlicHUrVGFkYzhIVFxuMDFHOGVEV002eVpDQmxzbFFyMk9WeXBIVVFDTlBaNmtzQnV2OUNjRkEyN3BhSGpxcmdkZkdNMGtoL1oxakFPeVxuSkRucWRiWWl2Ym5NK1VZQTRVRzdmVWV0akx2V040dWcvbWk0U3hweHJWVy95NHV4Y29uN1ZIUnhTa09IVjBMK1xuYjBRV3dqWkdEam0yZWRWUXNCUms2akJGcTVXUEcyb29aRGRWb2t1a25QaTNpQ0NUM2orUUsxRFR0bXVMaWFRK1xuVVlGL25vTjVJWm1aVzFiL0c5UHo4NW5xTEJKckkrd1pqdGQyNFFGMUFRS0JnUURoS25OaHN2NW01ZG45amxwSFxua1Z2ZTJCc3FCclVoQ0dSbGgvYkx4aGF5Q3FrNEgzVEU2ZXMzTEJPUjRMU09FTTBEcm9Vb05ScW1rY0gvUVZ5aVxuRm9kQlE3bHNlVlBpUzkxUjBXcUNlWW9LSVNnTmFFbFlUNGxHOHlSaFFaNmJPTFZ6TTJSQ0ozRkIwRU5JQU9UR1xuc21ZTnlRaitxODE0VW1rTG52eWhoTVdXWlFLQmdRQzZTUmVrN0w4eHNPVjl1QmJsQUwvK0h5KzlVYWNoaDZCSlxuYVRtTXRTeVhvOGlRMFpSajB5U1F0eE8yazQvV1FZNkg4WE44cFluZ0k1MUpZU3p0NWZFV1Z1alJvUCtkQWhJaVxua1VFckVNUDJQSGluVDJEWllWdXZtZFZrRVZ1Q0FURlNEVTdwQnNRN1VnKzlBb2dRcFkyWnFjS0JRWHJ4WmM2bFxuUXVycUFzVHpnUUtCZ0R2ZndPekMzeGxYbDU3d0FwdXpVSDJ5YzQ2NlYrSGZ6R3FmUEFZMXQ0VkNobnJ4Q21qdVxuVnVqRjVMSk8wVlJScldLRVBzNVJTTFB3WUdqUzVhSUlZWkQrUkVsTy9mcFgrQk13bjZUd1VyK2N6M3k1TlgreFxuTHF6YUxOdGJ5cVExOFRJZ0FWSUNFUURTTTRIckV1cXZONm9Fd2txT1BzWDNEQTNXQ2hHZEw3bHRBb0dBY3gzR1xuQ2JudmNOS2pEcXliSVVyMFdpS0ZpdFdSbFd2TmhuQUxDMFBPV2FyeHYyUno4YmhCNlZmcFM3TW1lTDJzU1ovUVxud1I4Kzg0NnVuUEQ3SmN3cHpxZElXbnJHV3cwempiNzdhWlNEdEgrc0E2Qk85aVp1MVRZWUl5MkN3ZlRndUpiV1xudzdQVndkNjFNUlVHWmxzWUJQUmQ2U2hBeERvb21BR2hUNWtFZ29FQ2dZQnRnWjFjUVNSSlBXTnMzMzVuc1BMOFxuYlVMd2VYQkNYK0huYm9raXlVc013c0N1VmErWkNYRUVtZzIvR3RVMXhtUG8ybENzUjg0dlp5cE83V0xCM1ZWMlxubWIwNTRzMXlPRGg1MVBySkhiY3FIVkJFcUZ1S05rNXE2V3VwSlQ0VnVsckU1K1pab2lSUHNNclh1NVFpeXYrRFxuVEh0aXVYZWVzUVlqL05COXBzRHorZz09XG4tLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tXG4iLAogICJjbGllbnRfZW1haWwiOiAieWFtbC10ZXN0LWFwcEBwYy1hcGktNjY5NzY0MTY5MjQ0MzE1NTA1Mi02NTAuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJjbGllbnRfaWQiOiAiMTA5NTkzMTA3NTc0ODMwOTkzODMxIiwKICAiYXV0aF91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLAogICJ0b2tlbl91cmkiOiAiaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4iLAogICJhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzIiwKICAiY2xpZW50X3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS95YW1sLXRlc3QtYXBwJTQwcGMtYXBpLTY2OTc2NDE2OTI0NDMxNTUwNTItNjUwLmlhbS5nc2VydmljZWFjY291bnQuY29tIgp9Cg==)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmc1MjZNNG5PMkQxdUFZbjB0bmVzT2lzaFZ0aGhyOWxDVEZJeWloT3VNN21LaHVnenFQeDVsMmdTcXJSZFpJWUZwWVVDci1acXQwcUJEbkN0M1RpX1U2U05FdkE9PQ)     
      flutter: stable
      xcode: latest
      cocoapods: default
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: '*'
          include: true
          source: true
    scripts:         
      - |
          # set up key.properties
          echo $FCI_KEYSTORE | base64 --decode > $FCI_KEYSTORE_PATH
          cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
          storePassword=$FCI_KEYSTORE_PASSWORD
          keyPassword=$FCI_KEY_PASSWORD
          keyAlias=$FCI_KEY_ALIAS
          storeFile=/tmp/keystore.keystore
          EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - flutter packages pub get
      - flutter build apk --release --build-name=2.0.$BUILD_NUMBER --build-number=$(($BUILD_NUMBER+ 1))
    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - nihal@nevercode.io
#       google_play: 
#         credentials: $GCLOUD_SERVICE_ACCOUNT_CREDENTIALS
#         track: $GOOGLE_PLAY_TRACK
